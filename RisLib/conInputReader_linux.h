#pragma once

/*==============================================================================
InputReader Services.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "conKeyReader_linux.h"
#include "conInputHistory_linux.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

namespace Con
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
// This class provides global program console i/o facility.

class InputReader
{
public:
   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Constants.

   static const int cMaxStringSize = 400;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // Keyboard input.
   KeyRecord mKeyIn;

   // Cursor postion.
   int mCursor;

   // Input string.
   char mInputString[cMaxStringSize];
   int mInputLength;

   // Input string history.
   InputHistory mInputHistory;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   InputReader();
   void resetVariables();

   // Initialize.
   void initialize();
   void finalize();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Read a string from the console input and copy it to the input
   // argument.
   void doReadString(char* aInputString);

   // Wait for a press enter at the console input.
   void doWaitForPressEnter();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   void onKey_Enter();
   void onKey_BackSpace();
   void onKey_Delete();
   void onKey_LeftArrow();
   void onKey_RightArrow();
   void onKey_UpArrow();
   void onKey_DownArrow();
   void onKey_Home();
   void onKey_End();
   void onKey_Insert();
   void onKey_PageUp();
   void onKey_PageDown();
   void onKey_Printable();
   void onKey_Control();
   void onKey_Alt();
   void onKey_Function();
   void onKey_Escape();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Write the input string to the console output and position the cursor.
   // This takes mInputString and mCursor and echos to the console output
   // appropriately.
   void echoInput();

   // Write an empty string to the console output.
   void echoEmpty();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Run test loop.
   void doTestLoop1();
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global singular instance.

#ifdef _CONINPUTREADER_CPP_
          InputReader gInputReader;
#else
   extern InputReader gInputReader;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace

